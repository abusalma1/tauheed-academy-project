<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete Confirmation - Excellence Academy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-blue-900 text-white sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-3">
                    <img src="/placeholder.svg?height=50&width=50" alt="School Logo" class="h-12 w-12 rounded-full bg-white p-1">
                    <div>
                        <h1 class="text-xl font-bold">Excellence Academy</h1>
                        <p class="text-xs text-blue-200">Admin Panel</p>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <section class="py-12 bg-gray-50 min-h-screen flex items-center justify-center">
        <div class="max-w-md w-full mx-auto px-4">
            <div class="bg-white rounded-lg shadow-lg p-8">
                <!-- Warning Icon -->
                <div class="flex justify-center mb-6">
                    <div class="bg-red-100 rounded-full p-4">
                        <i class="fas fa-exclamation-triangle text-red-600 text-4xl"></i>
                    </div>
                </div>

                <!-- Title -->
                <h2 class="text-2xl font-bold text-gray-900 text-center mb-2">Delete User Account</h2>
                <p class="text-gray-600 text-center mb-6">Are you sure you want to delete this user account?</p>

                <!-- User Details -->
                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                    <div class="space-y-3">
                        <div>
                            <p class="text-sm text-gray-600">User Name</p>
                            <p class="text-lg font-semibold text-gray-900" id="userName">-</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600">Email Address</p>
                            <p class="text-lg font-semibold text-gray-900" id="userEmail">-</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600">User Type</p>
                            <p class="text-lg font-semibold text-gray-900 capitalize" id="userType">-</p>
                        </div>
                    </div>
                </div>

                <!-- Warning Message -->
                <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                    <p class="text-sm text-red-800">
                        <i class="fas fa-info-circle mr-2"></i>
                        <strong>Warning:</strong> This action cannot be undone. All associated data will be permanently deleted.
                    </p>
                </div>

                <!-- Confirmation Checkbox -->
                <div class="mb-6">
                    <label class="flex items-center gap-3 cursor-pointer">
                        <input type="checkbox" id="confirmCheckbox" class="w-4 h-4 text-red-600 rounded focus:ring-2 focus:ring-red-500">
                        <span class="text-sm text-gray-700">I understand this action is permanent and cannot be reversed</span>
                    </label>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4">
                    <button id="cancelBtn" class="flex-1 bg-gray-300 text-gray-900 py-3 rounded-lg font-semibold hover:bg-gray-400 transition">
                        <i class="fas fa-times mr-2"></i>Cancel
                    </button>
                    <button id="deleteBtn" disabled class="flex-1 bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed">
                        <i class="fas fa-trash mr-2"></i>Delete Account
                    </button>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Get parameters from URL
        const params = new URLSearchParams(window.location.search);
        const userType = params.get('type');
        const userIndex = params.get('index');
        const userName = params.get('name');
        const userEmail = params.get('email');

        // Populate user details
        document.getElementById('userName').textContent = userName || '-';
        document.getElementById('userEmail').textContent = userEmail || '-';
        document.getElementById('userType').textContent = userType || '-';

        // Confirmation checkbox
        const confirmCheckbox = document.getElementById('confirmCheckbox');
        const deleteBtn = document.getElementById('deleteBtn');

        confirmCheckbox.addEventListener('change', () => {
            deleteBtn.disabled = !confirmCheckbox.checked;
        });

        // Cancel button
        document.getElementById('cancelBtn').addEventListener('click', () => {
            const managementPages = {
                'admin': 'admin-management.html',
                'teacher': 'teacher-management.html',
                'guardian': 'guardian-management.html',
                'student': 'student-management.html'
            };
            window.location.href = managementPages[userType] || 'user-management.html';
        });

        // Delete button
        deleteBtn.addEventListener('click', () => {
            if (!confirmCheckbox.checked) return;

            const storageKeys = {
                'admin': 'schoolAdmins',
                'teacher': 'schoolTeachers',
                'guardian': 'schoolGuardians',
                'student': 'schoolStudents'
            };

            const storageKey = storageKeys[userType];
            if (storageKey && userIndex !== null) {
                const users = JSON.parse(localStorage.getItem(storageKey)) || [];
                users.splice(userIndex, 1);
                localStorage.setItem(storageKey, JSON.stringify(users));
            }

            alert('User account deleted successfully!');
            
            // Redirect back to management page
            const managementPages = {
                'admin': 'admin-management.html',
                'teacher': 'teacher-management.html',
                'guardian': 'guardian-management.html',
                'student': 'student-management.html'
            };
            window.location.href = managementPages[userType] || 'user-management.html';
        });
    </script>
</body>
</html>
